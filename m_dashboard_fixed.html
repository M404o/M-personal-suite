<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M-dashboard | åŸå› ç©¶æ˜å®Ÿé¨“ç‰ˆ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #0f0f0f 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Glass Morphism Base */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .glass-strong {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: -0.02em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffffff 0%, #a0a0a0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #a0a0a0;
            font-size: 1.1rem;
            font-weight: 300;
        }

        /* Experiment Notice */
        .experiment-notice {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .experiment-notice h3 {
            color: #4ade80;
            margin-bottom: 10px;
        }

        .experiment-notice p {
            color: #d0d0d0;
            font-size: 0.9rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffffff, transparent);
            opacity: 0.3;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 15px;
            opacity: 0.8;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 200;
            margin-bottom: 5px;
            color: #ffffff;
        }

        .stat-label {
            color: #a0a0a0;
            font-size: 0.9rem;
            font-weight: 300;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 30px;
            padding: 5px;
            border-radius: 15px;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            color: #a0a0a0;
            font-weight: 300;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .nav-tab.active {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            backdrop-filter: blur(10px);
        }

        .nav-tab:hover:not(.active) {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.05);
        }

        /* Company Cards */
        .companies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .company-card {
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .company-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        .company-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .company-name {
            font-size: 1.3rem;
            font-weight: 400;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .company-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-replied {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status-waiting {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .status-no_response {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .company-details {
            display: grid;
            gap: 12px;
        }

        .detail-row {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #a0a0a0;
            font-size: 0.9rem;
        }

        .detail-icon {
            width: 16px;
            height: 16px;
            opacity: 0.7;
        }

        .email-count-badge {
            background: rgba(147, 51, 234, 0.2);
            color: #a855f7;
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid rgba(147, 51, 234, 0.3);
        }

        .response-preview {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 3px solid rgba(34, 197, 94, 0.5);
        }

        .response-text {
            color: #d0d0d0;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: rgba(147, 51, 234, 0.3);
            color: #a855f7;
            border: 1px solid rgba(147, 51, 234, 0.4);
        }

        .btn-primary:hover {
            background: rgba(147, 51, 234, 0.4);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: #a0a0a0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .btn-danger {
            background: rgba(239, 68, 68, 0.3);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.4);
        }

        .btn-danger:hover {
            background: rgba(239, 68, 68, 0.4);
        }

        /* Add Form */
        .add-form {
            padding: 30px;
            margin-bottom: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            color: #a0a0a0;
            font-size: 0.9rem;
            font-weight: 300;
        }

        .form-input, .form-select, .form-textarea {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #ffffff;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: rgba(147, 51, 234, 0.5);
            box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1);
        }

        .form-input::placeholder, .form-textarea::placeholder {
            color: #666;
        }

        /* Template Section */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .template-card {
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .template-card:hover {
            transform: translateY(-2px);
            border-color: rgba(147, 51, 234, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .template-title {
            font-size: 1.1rem;
            font-weight: 400;
            color: #a855f7;
            margin-bottom: 8px;
        }

        .template-type {
            color: #a0a0a0;
            font-size: 0.85rem;
            margin-bottom: 12px;
        }

        .template-description {
            color: #d0d0d0;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        /* Template Detail */
        .template-detail {
            padding: 30px;
        }

        .template-preview {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            color: #d0d0d0;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        /* Company Detail */
        .company-detail {
            padding: 30px;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: rgba(34, 197, 94, 0.9);
            color: white;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .companies-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .company-card {
                padding: 20px;
            }

            .nav-tabs {
                flex-direction: column;
                gap: 5px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .template-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        /* iPhone 15 Pro Specific */
        @media (max-width: 430px) {
            .stat-card {
                padding: 20px 15px;
            }

            .stat-number {
                font-size: 2rem;
            }

            .company-name {
                font-size: 1.1rem;
            }

            .btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        function MDashboardExperiment() {
            const [companies, setCompanies] = React.useState([]);
            const [activeTab, setActiveTab] = React.useState('dashboard');
            const [showAddForm, setShowAddForm] = React.useState(false);
            const [selectedTemplate, setSelectedTemplate] = React.useState(null);
            const [selectedCompany, setSelectedCompany] = React.useState(null);
            const [editingCompany, setEditingCompany] = React.useState(null);
            const [showNotification, setShowNotification] = React.useState(false);
            
            const [formData, setFormData] = React.useState({
                name: '',
                sentDate: '',
                emailCount: 1,
                status: 'waiting',
                lastResponse: '',
                notes: ''
            });

            const [templateVars, setTemplateVars] = React.useState({
                companyName: '',
                contactPerson: '',
                productURL: 'https://mindscape-demo.vercel.app',
                senderName: 'M',
                senderPosition: 'Project.M Founder',
                senderEmail: 'm@example.com'
            });

            // Enhanced email templates - å…¨6ã¤
            const emailTemplates = [
                {
                    id: 1,
                    title: "â‘ Icebreakerå‹",
                    type: "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ»ä¼šè©±å°å…¥å‹",
                    description: "ç›¸æ‰‹ã®æŠ•ç¨¿ã‚„Webã‹ã‚‰å…¥ã‚‹è‡ªç„¶ãªå°å…¥ã€‚èˆˆå‘³ã‚’å¼•ãä¸€è¨€ä»˜ãã€‚",
                    content: `Hi ${templateVars.contactPerson || '[æ‹…å½“è€…å]'},

I came across ${templateVars.companyName || '[ä¼æ¥­å]'}'s recent work on employee engagement and was impressed by your data-driven approach.

I've been developing Mindscape, a diagnostic tool that surfaces pre-burnout signals before they appear in traditional engagement scores. Given ${templateVars.companyName || '[ä¼æ¥­å]'}'s focus on actionable insights, I thought it might be relevant.

Would you be open to a brief conversation about how this might complement your current approach?

Best regards,
${templateVars.senderName}
${templateVars.senderPosition}
${templateVars.senderEmail}`
                },
                {
                    id: 2,
                    title: "â‘¡Problem-awareå‹",
                    type: "èª²é¡Œå‰æã®ææ¡ˆå‹",
                    description: "ç›¸æ‰‹ã®èª²é¡Œã‚’å‰æã«ã—ãŸææ¡ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ",
                    content: `Dear ${templateVars.contactPerson || '[æ‹…å½“è€…å]'},

${templateVars.companyName || '[ä¼æ¥­å]'} has built an impressive platform for measuring employee engagement. However, I understand that traditional engagement surveys often miss early warning signs of burnout and disengagement.

Mindscape addresses this gap by detecting pre-burnout signals through a 20-question diagnostic that reveals patterns engagement scores typically miss.

Early results show teams using this approach identify at-risk employees ~14 days earlier and see an 11% improvement in retention.

I'd love to explore how this might strengthen ${templateVars.companyName || '[ä¼æ¥­å]'}'s existing capabilities.

Warm regards,
${templateVars.senderName}
${templateVars.senderPosition}`
                },
                {
                    id: 3,
                    title: "â‘¢Direct Impactå‹",
                    type: "å³åŠ¹æ€§é‡è¦–",
                    description: "ä»Šã™ãå°å…¥ã§ã“ã‚ŒãŒå¤‰ã‚ã‚‹ç³»ã€‚æ”»ã‚å‹ã€‚",
                    content: `${templateVars.contactPerson || '[æ‹…å½“è€…å]'},

Cut to the chase: ${templateVars.companyName || '[ä¼æ¥­å]'} could reduce unexpected turnover by 30% within 90 days.

Here's how:

Our Mindscape diagnostic identifies pre-burnout signals 2-3 weeks before they show up in engagement surveys. This early detection allows for targeted interventions that prevent good people from burning out and leaving.

The ROI is immediate:
â€¢ Average cost of replacing one employee: $50,000+
â€¢ Cost of early intervention: <$500
â€¢ Time to see results: 30-60 days

${templateVars.companyName || '[ä¼æ¥­å]'} is already investing heavily in employee experience. This would amplify those investments by catching problems before they become expensive exits.

15-minute call to show you exactly how this works?

${templateVars.senderName}
${templateVars.senderEmail}
Project.M`
                },
                {
                    id: 4,
                    title: "â‘£Diagnosticæ¡ˆå†…å‹",
                    type: "ä½“é¨“å°ç·šé‡è¦–",
                    description: "ç„¡ç†ãªãä½“é¨“å°ç·šã‚’ä½œã‚‹ã€ã‚¯ãƒƒã‚·ãƒ§ãƒ³æ€§ã‚ã‚Š",
                    content: `Hi ${templateVars.contactPerson || '[æ‹…å½“è€…å]'},

I hope this finds you well. I've been following ${templateVars.companyName || '[ä¼æ¥­å]'}'s innovative work in the employee engagement space.

I'd love to offer you a complimentary assessment using our Mindscape diagnostic - it takes just 5 minutes and reveals insights that traditional engagement surveys often miss.

No strings attached - just genuinely curious to see what patterns emerge for ${templateVars.companyName || '[ä¼æ¥­å]'} and whether our findings align with your internal observations.

Try it here: ${templateVars.productURL}

Feel free to share the results with me if you find them interesting, or simply use them for your own insights.

Cheers,
${templateVars.senderName}
Founder, Project.M`
                },
                {
                    id: 5,
                    title: "â‘¤Mutual valueå‹",
                    type: "å…±å‰µå‰æãƒ»æœªæ¥å¿—å‘",
                    description: "ä¾¡å€¤è¦³ã®é‡ãªã‚Šã‚’å¼·èª¿ã—ãŸå…±å‰µã‚¢ãƒ—ãƒ­ãƒ¼ãƒ",
                    content: `Dear ${templateVars.contactPerson || '[æ‹…å½“è€…å]'},

${templateVars.companyName || '[ä¼æ¥­å]'}'s mission to help organizations build better cultures deeply resonates with our work at Project.M.

We're both tackling the same fundamental challenge: how to truly understand and support employee wellbeing before problems become crises.

Our Mindscape diagnostic complements traditional engagement tools by detecting the subtle patterns that precede burnout - the signals that surveys often miss but that deeply impact retention and performance.

I believe there could be meaningful synergies between our approaches. Would you be open to exploring how we might collaborate to push the boundaries of what's possible in employee experience?

Looking forward to the conversation,
${templateVars.senderName}
${templateVars.senderPosition}
Project.M`
                },
                {
                    id: 6,
                    title: "â‘¥Use-caseæç¤ºå‹",
                    type: "å…·ä½“äº‹ä¾‹é‡è¦–",
                    description: "ä»–ç¤¾ã§ã®æ´»ç”¨ä¾‹ã‚’ä¸»è»¸ã«æ§‹é€ ã§èªã‚‹",
                    content: `Hello ${templateVars.contactPerson || '[æ‹…å½“è€…å]'},

I wanted to share a recent case study that might interest ${templateVars.companyName || '[ä¼æ¥­å]'}.

A tech company similar to yours implemented our Mindscape diagnostic and discovered that 23% of their "highly engaged" employees were actually showing pre-burnout signals that traditional surveys missed.

By addressing these early indicators, they:
â€¢ Reduced unexpected turnover by 31%
â€¢ Improved team productivity by 18%
â€¢ Enhanced overall employee satisfaction scores

Given ${templateVars.companyName || '[ä¼æ¥­å]'}'s commitment to employee experience, I believe this approach could yield similar results for your teams.

Would you be interested in a brief demo?

Best,
${templateVars.senderName}
${templateVars.senderPosition}`
                }
            ];

            React.useEffect(() => {
                const saved = localStorage.getItem('mDashboardExperiment');
                if (saved) {
                    setCompanies(JSON.parse(saved));
                } else {
                    const sampleData = [
                        {
                            id: 1,
                            name: 'CultureAmp',
                            sentDate: '2025-07-15',
                            emailCount: 3,
                            status: 'replied',
                            lastResponse: 'ã‚µãƒãƒ¼ãƒˆæ‹…å½“ã«ä¼ãˆã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—å‘ã‘ã¯ãã¡ã‚‰ã«é€ã£ã¦ã€AIã‚’ä½¿ã£ãŸã£ã¦æ›¸ã„ã¦ãã ã•ã„',
                            notes: 'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—éƒ¨é–€ã«è»¢é€ã•ã‚ŒãŸã€‚å¥½åå¿œã€‚',
                            lastContactDays: 8
                        },
                        {
                            id: 2,
                            name: 'Greenhouse',
                            sentDate: '2025-07-16',
                            emailCount: 2,
                            status: 'waiting',
                            lastResponse: '',
                            notes: 'æ¡ç”¨ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚å¤§æ‰‹ä¼æ¥­ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¤šæ•°ã€‚',
                            lastContactDays: 7
                        },
                        {
                            id: 3,
                            name: '15Five',
                            sentDate: '2025-07-17',
                            emailCount: 1,
                            status: 'no_response',
                            lastResponse: '',
                            notes: 'ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç®¡ç†ã€‚ç¶™ç¶šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒå¼·ã¿ã€‚',
                            lastContactDays: 6
                        }
                    ];
                    setCompanies(sampleData);
                    localStorage.setItem('mDashboardExperiment', JSON.stringify(sampleData));
                }
            }, []);

            const saveData = (data) => {
                localStorage.setItem('mDashboardExperiment', JSON.stringify(data));
            };

            const addCompany = () => {
                if (!formData.name || !formData.sentDate) return;
                
                const newCompany = {
                    ...formData,
                    id: Date.now(),
                    lastContactDays: Math.floor((new Date() - new Date(formData.sentDate)) / (1000 * 60 * 60 * 24))
                };
                const updated = [...companies, newCompany];
                setCompanies(updated);
                saveData(updated);
                resetForm();
                showNotificationMessage('ä¼æ¥­ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼');
            };

            const editCompany = (company) => {
                setFormData(company);
                setEditingCompany(company.id);
                setShowAddForm(true);
            };

            const updateCompany = () => {
                if (!formData.name || !formData.sentDate) return;
                
                const updated = companies.map(company => 
                    company.id === editingCompany 
                        ? {...formData, id: editingCompany, lastContactDays: Math.floor((new Date() - new Date(formData.sentDate)) / (1000 * 60 * 60 * 24))}
                        : company
                );
                setCompanies(updated);
                saveData(updated);
                resetForm();
                setEditingCompany(null);
                showNotificationMessage('ä¼æ¥­ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼');
            };

            const deleteCompany = (id) => {
                const updated = companies.filter(company => company.id !== id);
                setCompanies(updated);
                saveData(updated);
                setSelectedCompany(null);
                showNotificationMessage('ä¼æ¥­ã‚’å‰Šé™¤ã—ã¾ã—ãŸï¼');
            };

            const resetForm = () => {
                setFormData({
                    name: '',
                    sentDate: '',
                    emailCount: 1,
                    status: 'waiting',
                    lastResponse: '',
                    notes: ''
                });
                setShowAddForm(false);
            };

            const showNotificationMessage = (message) => {
                setShowNotification(message);
                setTimeout(() => setShowNotification(false), 3000);
            };

            const copyToClipboard = (text) => {
                navigator.clipboard.writeText(text);
                showNotificationMessage('âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            };

            const generateEmailContent = (template) => {
                return template.content
                    .replace(/\${templateVars\.companyName \|\| '\[ä¼æ¥­å\]'}/g, templateVars.companyName || '[ä¼æ¥­å]')
                    .replace(/\${templateVars\.contactPerson \|\| '\[æ‹…å½“è€…å\]'}/g, templateVars.contactPerson || '[æ‹…å½“è€…å]')
                    .replace(/\${templateVars\.productURL}/g, templateVars.productURL)
                    .replace(/\${templateVars\.senderName}/g, templateVars.senderName)
                    .replace(/\${templateVars\.senderPosition}/g, templateVars.senderPosition)
                    .replace(/\${templateVars\.senderEmail}/g, templateVars.senderEmail);
            };

            const getStatusIcon = (status) => {
                switch (status) {
                    case 'replied': return 'âœ“';
                    case 'waiting': return 'â±';
                    case 'no_response': return 'âœ—';
                    default: return '?';
                }
            };

            const calculateStats = () => {
                const total = companies.length;
                const replied = companies.filter(c => c.status === 'replied').length;
                const waiting = companies.filter(c => c.status === 'waiting').length;
                const noResponse = companies.filter(c => c.status === 'no_response').length;
                const totalEmails = companies.reduce((sum, c) => sum + c.emailCount, 0);
                
                return { total, replied, waiting, noResponse, totalEmails };
            };

            const stats = calculateStats();

            const renderDashboard = () => (
                <div>
                    {/* Experiment Notice */}
                    <div className="experiment-notice glass">
                        <h3>ğŸ§ª åŸå› ç©¶æ˜å®Ÿé¨“ä¸­</h3>
                        <p>M-dashboard (Reactâ†’HTMLå¤‰æ›ç‰ˆ) | Vercelã§ã®å‹•ä½œç¢ºèª</p>
                    </div>

                    {/* Stats */}
                    <div className="stats-grid">
                        <div className="stat-card glass">
                            <div className="stat-icon">
                                <i data-lucide="building"></i>
                            </div>
                            <div className="stat-number">{stats.total}</div>
                            <div className="stat-label">ç·ä¼æ¥­æ•°</div>
                        </div>
                        <div className="stat-card glass">
                            <div className="stat-icon">
                                <i data-lucide="check-circle"></i>
                            </div>
                            <div className="stat-number">{stats.replied}</div>
                            <div className="stat-label">è¿”äº‹ã‚ã‚Š</div>
                        </div>
                        <div className="stat-card glass">
                            <div className="stat-icon">
                                <i data-lucide="mail"></i>
                            </div>
                            <div className="stat-number">{stats.totalEmails}</div>
                            <div className="stat-label">ç·ãƒ¡ãƒ¼ãƒ«æ•°</div>
                        </div>
                        <div className="stat-card glass">
                            <div className="stat-icon">
                                <i data-lucide="clock"></i>
                            </div>
                            <div className="stat-number">{stats.waiting}</div>
                            <div className="stat-label">è¿”äº‹å¾…ã¡</div>
                        </div>
                    </div>

                    {/* Add Button */}
                    <div style={{marginBottom: '30px'}}>
                        <button 
                            onClick={() => setShowAddForm(!showAddForm)}
                            className="btn btn-primary"
                        >
                            <i data-lucide="plus"></i>
                            æ–°ã—ã„ä¼æ¥­ã‚’è¿½åŠ 
                        </button>
                    </div>

                    {/* Add Form */}
                    {showAddForm && (
                        <div className="add-form glass-strong">
                            <h3 style={{marginBottom: '20px', color: '#ffffff'}}>
                                {editingCompany ? 'ä¼æ¥­æƒ…å ±ã‚’ç·¨é›†' : 'æ–°ã—ã„ä¼æ¥­ã‚’è¿½åŠ '}
                            </h3>
                            <div className="form-grid">
                                <div className="form-group">
                                    <label className="form-label">ä¼æ¥­å</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        placeholder="CultureAmp"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">é€ä¿¡æ—¥</label>
                                    <input
                                        type="date"
                                        className="form-input"
                                        value={formData.sentDate}
                                        onChange={(e) => setFormData({...formData, sentDate: e.target.value})}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">ãƒ¡ãƒ¼ãƒ«å›æ•°</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.emailCount}
                                        onChange={(e) => setFormData({...formData, emailCount: parseInt(e.target.value) || 1})}
                                        min="1"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">çŠ¶æ…‹</label>
                                    <select
                                        className="form-select"
                                        value={formData.status}
                                        onChange={(e) => setFormData({...formData, status: e.target.value})}
                                    >
                                        <option value="waiting">å¾…æ©Ÿä¸­</option>
                                        <option value="replied">è¿”äº‹ã‚ã‚Š</option>
                                        <option value="no_response">æœªè¿”ä¿¡</option>
                                    </select>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">æœ€å¾Œã®è¿”äº‹</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={formData.lastResponse}
                                        onChange={(e) => setFormData({...formData, lastResponse: e.target.value})}
                                        placeholder="ã‚µãƒãƒ¼ãƒˆæ‹…å½“ã«ä¼ãˆã¾ã™..."
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">ãƒ¡ãƒ¢</label>
                                    <textarea
                                        className="form-textarea"
                                        value={formData.notes || ''}
                                        onChange={(e) => setFormData({...formData, notes: e.target.value})}
                                        placeholder="ä¼æ¥­ã®ç‰¹å¾´ã‚„æˆ¦ç•¥ãƒ¡ãƒ¢..."
                                    />
                                </div>
                            </div>
                            <div className="action-buttons">
                                <button 
                                    onClick={editingCompany ? updateCompany : addCompany} 
                                    className="btn btn-primary"
                                >
                                    <i data-lucide="save"></i>
                                    {editingCompany ? 'æ›´æ–°' : 'è¿½åŠ '}
                                </button>
                                <button 
                                    onClick={() => {
                                        resetForm();
                                        setEditingCompany(null);
                                    }} 
                                    className="btn btn-secondary"
                                >
                                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Companies */}
                    <div className="companies-grid">
                        {companies.map((company) => (
                            <div key={company.id} className="company-card glass">
                                <div className="company-header">
                                    <div style={{flex: 1}}>
                                        <div className="company-name">{company.name}</div>
                                        <div className={`company-status status-${company.status}`}>
                                            {getStatusIcon(company.status)} {company.status === 'replied' ? 'è¿”äº‹ã‚ã‚Š' : company.status === 'waiting' ? 'è¿”äº‹å¾…ã¡' : 'æœªè¿”ä¿¡'}
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="company-details">
                                    <div className="detail-row">
                                        <i data-lucide="calendar" className="detail-icon"></i>
                                        <span>é€ä¿¡æ—¥: {company.sentDate}</span>
                                    </div>
                                    <div className="detail-row">
                                        <i data-lucide="mail" className="detail-icon"></i>
                                        <span>ãƒ¡ãƒ¼ãƒ«å›æ•°:</span>
                                        <span className="email-count-badge">{company.emailCount}å›</span>
                                    </div>
                                    {company.lastContactDays !== undefined && (
                                        <div className="detail-row">
                                            <i data-lucide="clock" className="detail-icon"></i>
                                            <span>{company.lastContactDays}æ—¥å‰</span>
                                        </div>
                                    )}
                                </div>

                                {company.lastResponse && (
                                    <div className="response-preview">
                                        <div className="response-text">
                                            "{company.lastResponse}"
                                        </div>
                                    </div>
                                )}

                                <div className="action-buttons">
                                    <button 
                                        className="btn btn-primary"
                                        onClick={() => setSelectedCompany(company)}
                                    >
                                        <i data-lucide="eye"></i>
                                        è©³ç´°
                                    </button>
                                    <button 
                                        className="btn btn-secondary"
                                        onClick={() => editCompany(company)}
                                    >
                                        <i data-lucide="edit"></i>
                                        ç·¨é›†
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            const renderCompanyDetail = () => (
                <div className="company-detail glass">
                    <button 
                        onClick={() => setSelectedCompany(null)}
                        className="btn btn-secondary"
                        style={{marginBottom: '20px'}}
                    >
                        <i data-lucide="arrow-left"></i>
                        ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹
                    </button>

                    <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '30px'}}>
                        <div>
                            <h2 style={{color: '#ffffff', marginBottom: '10px'}}>{selectedCompany.name}</h2>
                            <div className={`company-status status-${selectedCompany.status}`}>
                                {getStatusIcon(selectedCompany.status)} {selectedCompany.status === 'replied' ? 'è¿”äº‹ã‚ã‚Š' : selectedCompany.status === 'waiting' ? 'è¿”äº‹å¾…ã¡' : 'æœªè¿”ä¿¡'}
                            </div>
                        </div>
                        <button 
                            onClick={() => deleteCompany(selectedCompany.id)}
                            className="btn btn-danger"
                        >
                            <i data-lucide="trash-2"></i>
                            å‰Šé™¤
                        </button>
                    </div>

                    <div className="form-grid" style={{marginBottom: '30px'}}>
                        <div className="form-group">
                            <label className="form-label">é€ä¿¡æ—¥</label>
                            <div style={{color: '#ffffff'}}>{selectedCompany.sentDate}</div>
                        </div>
                        <div className="form-group">
                            <label className="form-label">ãƒ¡ãƒ¼ãƒ«å›æ•°</label>
                            <div style={{color: '#ffffff'}}>{selectedCompany.emailCount}å›</div>
                        </div>
                        <div className="form-group">
                            <label className="form-label">æœ€çµ‚é€£çµ¡</label>
                            <div style={{color: '#ffffff'}}>{selectedCompany.lastContactDays}æ—¥å‰</div>
                        </div>
                    </div>

                    {selectedCompany.lastResponse && (
                        <div style={{marginBottom: '20px'}}>
                            <h3 style={{color: '#ffffff', marginBottom: '10px'}}>æœ€å¾Œã®è¿”äº‹</h3>
                            <div className="response-preview">
                                <div className="response-text">"{selectedCompany.lastResponse}"</div>
                            </div>
                        </div>
                    )}

                    {selectedCompany.notes && (
                        <div>
                            <h3 style={{color: '#ffffff', marginBottom: '10px'}}>ãƒ¡ãƒ¢</h3>
                            <div style={{color: '#d0d0d0', padding: '15px', background: 'rgba(255, 255, 255, 0.03)', borderRadius: '10px'}}>
                                {selectedCompany.notes}
                            </div>
                        </div>
                    )}
                </div>
            );

            const renderTemplates = () => {
                if (selectedTemplate) {
                    return (
                        <div className="template-detail glass">
                            <button 
                                onClick={() => setSelectedTemplate(null)}
                                className="btn btn-secondary"
                                style={{marginBottom: '20px'}}
                            >
                                <i data-lucide="arrow-left"></i>
                                ãƒ†ãƒ³ãƒ—ãƒ¬ä¸€è¦§ã«æˆ»ã‚‹
                            </button>

                            <h2 style={{color: '#ffffff', marginBottom: '10px'}}>{selectedTemplate.title}</h2>
                            <p style={{color: '#a0a0a0', marginBottom: '30px'}}>{selectedTemplate.description}</p>

                            {/* Variables Form */}
                            <div className="form-grid" style={{marginBottom: '30px'}}>
                                <div className="form-group">
                                    <label className="form-label">ä¼æ¥­å</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={templateVars.companyName}
                                        onChange={(e) => setTemplateVars({...templateVars, companyName: e.target.value})}
                                        placeholder="Culture Amp"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">æ‹…å½“è€…å</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={templateVars.contactPerson}
                                        onChange={(e) => setTemplateVars({...templateVars, contactPerson: e.target.value})}
                                        placeholder="Emily"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">ã‚ãªãŸã®åå‰</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={templateVars.senderName}
                                        onChange={(e) => setTemplateVars({...templateVars, senderName: e.target.value})}
                                        placeholder="M"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">å½¹è·</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={templateVars.senderPosition}
                                        onChange={(e) => setTemplateVars({...templateVars, senderPosition: e.target.value})}
                                        placeholder="Project.M Founder"
                                    />
                                </div>
                            </div>

                            {/* Preview */}
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px'}}>
                                <h3 style={{color: '#ffffff'}}>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
                                <button 
                                    onClick={() => copyToClipboard(generateEmailContent(selectedTemplate))}
                                    className="btn btn-primary"
                                >
                                    <i data-lucide="copy"></i>
                                    ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <div className="template-preview">
                                {generateEmailContent(selectedTemplate)}
                            </div>
                        </div>
                    );
                }

                return (
                    <div>
                        <h2 style={{color: '#ffffff', marginBottom: '30px'}}>GPT ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2>
                        <div className="template-grid">
                            {emailTemplates.map(template => (
                                <div 
                                    key={template.id} 
                                    className="template-card glass"
                                    onClick={() => setSelectedTemplate(template)}
                                >
                                    <div className="template-title">{template.title}</div>
                                    <div className="template-type">{template.type}</div>
                                    <div className="template-description">{template.description}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            React.useEffect(() => {
                // Initialize Lucide icons
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            });

            // Main render
            if (selectedCompany) {
                return (
                    <div className="container">
                        <div className="header glass">
                            <h1>M-dashboard ğŸ§ª å®Ÿé¨“ç‰ˆ</h1>
                            <p>React â†’ HTML å®Œå…¨å¤‰æ› | åŸå› ç©¶æ˜ä¸­</p>
                        </div>
                        {renderCompanyDetail()}
                        {showNotification && (
                            <div className="notification">
                                {showNotification}
                            </div>
                        )}
                    </div>
                );
            }

            return (
                <div className="container">
                    {/* Header */}
                    <div className="header glass">
                        <h1>M-dashboard ğŸ§ª å®Ÿé¨“ç‰ˆ</h1>
                        <p>React â†’ HTML å®Œå…¨å¤‰æ› | Vercelå‹•ä½œç¢ºèª</p>
                    </div>

                    {/* Navigation */}
                    <div className="nav-tabs glass">
                        <button 
                            className={`nav-tab ${activeTab === 'dashboard' ? 'active' : ''}`}
                            onClick={() => setActiveTab('dashboard')}
                        >
                            <i data-lucide="layout-dashboard"></i>
                            ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                        </button>
                        <button 
                            className={`nav-tab ${activeTab === 'templates' ? 'active' : ''}`}
                            onClick={() => setActiveTab('templates')}
                        >
                            <i data-lucide="mail"></i>
                            ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬
                        </button>
                        <button 
                            className={`nav-tab ${activeTab === 'analytics' ? 'active' : ''}`}
                            onClick={() => setActiveTab('analytics')}
                        >
                            <i data-lucide="bar-chart-3"></i>
                            åˆ†æ
                        </button>
                    </div>

                    {/* Content */}
                    {activeTab === 'dashboard' && renderDashboard()}
                    {activeTab === 'templates' && renderTemplates()}
                    {activeTab === 'analytics' && (
                        <div className="glass" style={{padding: '40px', textAlign: 'center'}}>
                            <h2 style={{color: '#ffffff', marginBottom: '20px'}}>åˆ†ææ©Ÿèƒ½</h2>
                            <p style={{color: '#a0a0a0'}}>è¿”ä¿¡ç‡ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã€æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†ææ©Ÿèƒ½ã‚’æº–å‚™ä¸­...</p>
                        </div>
                    )}

                    {/* Notification */}
                    {showNotification && (
                        <div className="notification">
                            {showNotification}
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<MDashboardExperiment />, document.getElementById('root'));
    </script>
</body>
</html>
                            <div className="stat-icon">
                                <i data-lucide="building"></i>
                            </div>
                            <div className="stat-number">{stats.total}</div>
                            <div className="stat-label">ç·ä¼æ¥­æ•°</div>
                        </div>
                        <div className="stat-card glass">